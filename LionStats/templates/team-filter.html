<!DOCTYPE html>
{% extends 'navbar.html' %}
{% load static %}
<html lang="en">
<head>
    {% block css %}
    <link href="https://fonts.googleapis.com/css?family=Zen+Dots&display=swap" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/team-filter.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="application/javascript" src="{% static 'js/dropdown.js' %}"></script>
    {% endblock %}
    {% block title %}
    <title>Team Filter</title>
    {% endblock %}
</head>

<body>
{% block team-filter %}
<div class="current"></div>
{% endblock %}

{% block content %}
<div class ="chart">
    <canvas id ="teamChart" width="800px" height="500px"></canvas>
</div>

<script>
{% block jquery %}
var endpoint = '/api/team/data'
var teamData = []
var labels = []
$.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){
        labels = data.labels
        teamData = data.default
        //console.log(data)
        var ctx = document.getElementById('teamChart').getContext('2d');
        var teamChart = new Chart(ctx, {
          type: 'bar',
          data:{
          labels: labels,
          datasets: [{
            data: teamData,
            backgroundColor: [
              'rgba(255, 99, 132, 0.2)',
              'rgba(255, 159, 64, 0.2)',
              'rgba(255, 205, 86, 0.2)',
              'rgba(75, 192, 192, 0.2)',
              'rgba(54, 162, 235, 0.2)',
              'rgba(153, 102, 255, 0.2)',
              'rgba(201, 203, 207, 0.2)'
            ],
            borderColor: [
              'rgb(255, 99, 132)',
              'rgb(255, 159, 64)',
              'rgb(255, 205, 86)',
              'rgb(75, 192, 192)',
              'rgb(54, 162, 235)',
              'rgb(153, 102, 255)',
              'rgb(201, 203, 207)'
            ],
            borderWidth: 1
          }]
          },
           options: {
                responsive: false
            }
        });

        },
    error: function(error_data){
        console.log("error")
        console.log(error_data)
    }
})

{% endblock %}
</script>
<div class="content">
    <div class="Athlete">
        <h4> Athletes </h4>
        <div class="Dropdown">
                <select name = "dropdown" class="menu" id = "dropdownAthlete">

                </select>
<!--                </form>-->
<!--            </nav>-->
        </div>
    </div>

    <div class="Position">
        <h4> Position </h4>
        <div class="Dropdown">
<!--            <nav>-->
                <select name = "position" class="menu" id = "dropdownPosition">
                </select>
<!--            </nav>-->
        </div>
    </div>

    <div class="Session">
        <h4> Session </h4>
        <div class="Dropdown">
<!--            <nav>-->
                <select name = "session" class="menu" id = "dropdownSession">
                </select>
<!--            </nav>-->
        </div>
    </div>

    <div class="AcademicYear">
        <h4> Start/End Date </h4>
        <div class="Dropdown">
<!--            <nav>-->
<!--               <select name = "year" class="menu" id = "dropdownYear">-->
<!--                </select>-->
                <input type="date" id="myStartDate">
            <script>
                    function dataTeam()
                    {
                        var selected = $("#myStartDate).datepicker('getDate');;
                        let csrftoken = '{{ csrf_token }}';
                        $.ajax({
                        url:'/startdate/',
                        type: "POST",
                        headers:{'X-CSRFToken': csrftoken},
                        data: {'value' : selected,},
                        dataType: "json",
                        });
                    }
                </script>
                <input type="date" id="myEndDate">
            <script>
                    function dataTeam()
                    {
                        var selected = $("#dropdown option:selected").text();
                        let csrftoken = '{{ csrf_token }}';
                        $.ajax({
                        url:'/enddate/',
                        type: "POST",
                        headers:{'X-CSRFToken': csrftoken},
                        data: {'value' : selected,},
                        dataType: "json",
                        });
                    }
                </script>
<!--            </nav>-->
        </div>
    </div>

<!--    <div class="StatisticType">-->
<!--        <h4> Statistic Type </h4>-->
<!--        <div class="Dropdown">-->
<!--            <nav>-->
<!--                <label for="touchType"><span>Type</span></label>-->
<!--                <input type="checkbox" id="touchType">-->

<!--                <ul class="menu">-->
<!--                <li><a href="#">Type 1</a></li>-->
<!--                <li><a href="#">Type 2</a></li>-->
<!--                <li><a href="#">Type 3</a></li>-->
<!--                <li><a href="#">Type 4</a></li>-->
<!--                </ul>-->
<!--            </nav>-->
<!--        </div>-->
<!--    </div>-->
</div>

<!--<canvas id="teamStats">-->

<!--</canvas>-->
{% endblock %}
</body>

</html>
